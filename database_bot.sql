-- Создание базы данных
   CREATE DATABASE IF NOT EXISTS school_bot;
   USE school_bot;

-- Создание таблиц
CREATE TABLE users (
   id INT AUTO_INCREMENT PRIMARY KEY,
   telegram_id BIGINT UNIQUE,
   phone_number VARCHAR(20),
   role ENUM('student', 'teacher', 'admin') NOT NULL,
   name VARCHAR(100) NOT NULL
);

CREATE TABLE subjects (
   id INT AUTO_INCREMENT PRIMARY KEY,
   name VARCHAR(100) NOT NULL,
   teacher_id INT,
   FOREIGN KEY (teacher_id) REFERENCES users(id)
);

CREATE TABLE grades (
   id INT AUTO_INCREMENT PRIMARY KEY,
   student_id INT,
   subject_id INT,
   grade INT CHECK (grade BETWEEN 1 AND 5),
   semester INT,
   date DATE,
   FOREIGN KEY (student_id) REFERENCES users(id),
   FOREIGN KEY (subject_id) REFERENCES subjects(id)
);

CREATE TABLE schedule (
   id INT AUTO_INCREMENT PRIMARY KEY,
   subject_id INT,
   day_of_week VARCHAR(20),
   time VARCHAR(10),
   location VARCHAR(100),
   FOREIGN KEY (subject_id) REFERENCES subjects(id)
);

CREATE TABLE homework (
   id INT AUTO_INCREMENT PRIMARY KEY,
   subject_id INT,
   student_id INT,
   description TEXT,
   due_date DATE,
   FOREIGN KEY (subject_id) REFERENCES subjects(id),
   FOREIGN KEY (student_id) REFERENCES users(id)
);

CREATE TABLE feedback (
   id INT AUTO_INCREMENT PRIMARY KEY,
   user_id INT,
   message TEXT,
   created_at DATETIME,
   FOREIGN KEY (user_id) REFERENCES users(id)
);

-- Заполнение таблицы users (с вашими данными)
INSERT INTO users (telegram_id, phone_number, role, name) VALUES
(540083015, '+79253332602', 'admin', 'Админ'),
(7236879403, '+79933382642', 'teacher', 'Иванов Иван Иванович'),
(987654322, '+0987654322', 'teacher', 'Петрова Анна Сергеевна'),
(987654323, '+0987654323', 'teacher', 'Сидоров Михаил Юрьевич'),
(987654324, '+0987654324', 'teacher', 'Козлова Елена Викторовна'),
(987654325, '+0987654325', 'teacher', 'Морозов Алексей Павлович'),
(7300938948, '+79152789573', 'student', 'Петров Петр Петрович'),
(111222334, '+1112223332', 'student', 'Смирнова Ольга Ивановна'),
(111222335, '+1112223333', 'student', 'Кузнецов Дмитрий Сергеевич'),
(111222336, '+1112223334', 'student', 'Васильева Мария Александровна'),
(111222337, '+1112223335', 'student', 'Попов Артем Викторович'),
(111222338, '+1112223336', 'student', 'Соколова Екатерина Андреевна'),
(111222339, '+1112223337', 'student', 'Лебедев Игорь Олегович'),
(111222340, '+1112223338', 'student', 'Новикова Алина Павловна'),
(111222341, '+1112223339', 'student', 'Михайлов Сергей Юрьевич'),
(111222342, '+1112223340', 'student', 'Волкова Юлия Сергеевна'),
(111222343, '+1112223341', 'student', 'Федоров Иван Алексеевич'),
(111222344, '+1112223342', 'student', 'Морозова Анастасия Дмитриевна'),
(111222345, '+1112223343', 'student', 'Зайцев Павел Игоревич'),
(111222346, '+1112223344', 'student', 'Ковалева Дарья Николаевна'),
(111222347, '+1112223345', 'student', 'Белов Антон Викторович'),
(111222348, '+1112223346', 'student', 'Орлова София Михайловна'),
(111222349, '+1112223347', 'student', 'Григорьев Никита Сергеевич'),
(111222350, '+1112223348', 'student', 'Титова Валерия Андреевна'),
(111222351, '+1112223349', 'student', 'Егоров Даниил Павлович'),
(111222352, '+1112223350', 'student', 'Романова Елизавета Олеговна');

-- Заполнение таблицы subjects
INSERT INTO subjects (name, teacher_id) VALUES
('Математика', 2),
('Физика', 2),
('Русский язык', 3),
('Литература', 3),
('Химия', 4),
('Биология', 4),
('История', 5),
('Обществознание', 5),
('Английский язык', 6),
('Информатика', 6);



-- Заполнение
INSERT INTO schedule (subject_id, day_of_week, time, location) VALUES
(1, 'monday', '08:30', 'Каб. 101'),
(1, 'wednesday', '10:00', 'Каб. 101'),
(2, 'tuesday', '09:00', 'Каб. 102'),
(2, 'friday', '11:30', 'Каб. 102'),
(3, 'monday', '10:00', 'Каб. 103'),
(3, 'thursday', '08:30', 'Каб. 103'),
(4, 'tuesday', '11:30', 'Каб. 104'),
(4, 'friday', '10:00', 'Каб. 104'),
(5, 'wednesday', '09:00', 'Каб. 105'),
(5, 'thursday', '11:30', 'Каб. 105'),
(6, 'monday', '11:30', 'Каб. 106'),
(6, 'tuesday', '08:30', 'Каб. 106'),
(7, 'wednesday', '08:30', 'Каб. 107'),
(7, 'friday', '09:00', 'Каб. 107'),
(8, 'monday', '09:00', 'Каб. 108'),
(8, 'thursday', '10:00', 'Каб. 108'),
(9, 'tuesday', '10:00', 'Каб. 109'),
(9, 'wednesday', '11:30', 'Каб. 109'),
(10, 'monday', '08:30', 'Каб. 110'),
(10, 'friday', '08:30', 'Каб. 110');

-- Заполнение таблицы grades
INSERT INTO grades (student_id, subject_id, grade, semester, date) VALUES
(7, 1, 5, 1, '2024-09-10'), (7, 1, 4, 1, '2024-09-17'), (7, 2, 3, 1, '2024-09-12'),
(8, 1, 4, 1, '2024-09-10'), (8, 2, 5, 1, '2024-09-12'), (8, 3, 4, 1, '2024-09-15'),
(9, 1, 3, 1, '2024-09-10'), (9, 4, 5, 1, '2024-09-11'), (9, 5, 4, 1, '2024-09-13'),
(10, 2, 4, 1, '2024-09-12'), (10, 3, 5, 1, '2024-09-15'), (10, 6, 3, 1, '2024-09-16'),
(11, 1, 5, 1, '2024-09-10'), (11, 7, 4, 1, '2024-09-14'), (11, 8, 5, 1, '2024-09-15'),
(12, 2, 3, 1, '2024-09-12'), (12, 9, 4, 1, '2024-09-17'), (12, 10, 5, 1, '2024-09-18'),
(13, 3, 4, 1, '2024-09-15'), (13, 4, 5, 1, '2024-09-11'), (13, 1, 3, 1, '2024-09-10'),
(14, 5, 5, 1, '2024-09-13'), (14, 6, 4, 1, '2024-09-16'), (14, 2, 3, 1, '2024-09-12'),
(15, 7, 4, 1, '2024-09-14'), (15, 8, 5, 1, '2024-09-15'), (15, 9, 3, 1, '2024-09-17'),
(16, 10, 5, 1, '2024-09-18'), (16, 1, 4, 1, '2024-09-10'), (16, 3, 3, 1, '2024-09-15'),
-- Семестр 2
(7, 1, 5, 2, '2025-01-15'), (7, 2, 4, 2, '2025-01-20'), (7, 3, 5, 2, '2025-01-22'),
(8, 4, 3, 2, '2025-01-16'), (8, 5, 4, 2, '2025-01-18'), (8, 6, 5, 2, '2025-01-19'),
(9, 7, 5, 2, '2025-01-17'), (9, 8, 4, 2, '2025-01-21'), (9, 9, 3, 2, '2025-01-23'),
(10, 10, 4, 2, '2025-01-20'), (10, 1, 5, 2, '2025-01-15'), (10, 2, 3, 2, '2025-01-20');

-- Заполнение таблицы homework
INSERT INTO homework (subject_id, student_id, description, due_date) VALUES
(1, 7, 'Решить задачи 1-10 из учебника', '2024-09-20'),
(2, 7, 'Подготовить доклад о законах Ньютона', '2024-09-22'),
(3, 8, 'Выучить стихотворение Пушкина', '2024-09-19'),
(4, 8, 'Прочитать "Преступление и наказание"', '2024-09-25'),
(5, 9, 'Решить химические уравнения 1-5', '2024-09-21'),
(6, 9, 'Составить таблицу по биологии', '2024-09-23'),
(7, 10, 'Подготовить презентацию о Средних веках', '2024-09-20'),
(8, 10, 'Написать эссе о гражданском обществе', '2024-09-24'),
(9, 11, 'Перевести текст на английский', '2024-09-22'),
(10, 11, 'Написать программу на Python', '2024-09-26'),
(1, 12, 'Решить задачи 11-20', '2024-09-20'),
(2, 13, 'Эксперимент по физике', '2024-09-22'),
(3, 14, 'Анализ текста', '2024-09-19'),
(4, 15, 'Прочитать рассказ Чехова', '2024-09-25'),
(5, 16, 'Лабораторная работа по химии', '2024-09-21');

-- Заполнение таблицы feedback
INSERT INTO feedback (user_id, message, created_at) VALUES
(7, 'Предлагаю добавить уведомления о дедлайнах ДЗ', '2024-09-10 10:00:00'),
(8, 'Было бы удобно видеть средний балл по предмету', '2024-09-11 12:30:00'),
(9, 'Иногда бот долго отвечает, можно ускорить?', '2024-09-12 15:45:00'),
(10, 'Хочу возможность редактировать свои данные', '2024-09-13 09:20:00'),
(11, 'Спасибо за бота, очень удобно!', '2024-09-14 11:10:00');
